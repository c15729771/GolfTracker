{% extends 'Golf_Journal/base.html' %}
{% block head %}
            <div class="tracking">
        <h1>Track Your Game</h1>
    </div>

    <div id="map">

        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
              integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
              crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
                    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
                    crossorigin="">

        </script>

    </div>
    <div class="trackNow">
        <button class="btn" onclick="getLocation()">Try It</button>
    </div>

    <footer>
        <p>GolfJournal, Copyright &copy; 2019</p>
    </footer>

    <script>

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else {
                alert('failed');
            }
        }

        function showPosition(position) {
            alert('Position: ' + position.coords.latitude);
            // x.innerHTML = "Latitude: " + position.coords.latitude +
            // "<br>Longitude: " + position.coords.longitude;
        }


        // initialize the map
        var map = L.map('map').setView([53.36743465, -6.3372488], 14.8);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.streets',
            accessToken: 'pk.eyJ1IjoiYzE1NzI5NzcxIiwiYSI6ImNqb2hkZ3I4MzBpYTEzcG8zdG9menE4aWgifQ.omQRZRZ0uMdYT7Dc-qVXwQ'
        }).addTo(map);


        watchID = navigator.geolocation.watchPosition(
            function (position) {
                //alert(position.coords.latitude, position.coords.longitude);
            },
            function () {
                alert("Sorry, no position available.");
            },
            {
                enableHighAccuracy: true
            }
        );

        // function geo_success(position) {
        //   do_something(position.coords.latitude, position.coords.longitude);
        // }
        //
        // function geo_error() {
        //   alert("Sorry, no position available.");
        // }

        // var geo_options = {
        //   enableHighAccuracy: true
        // };
        //
        // var wpid = navigator.geolocation.watchPosition(geo_success, geo_error, geo_options);

        //visuals only
        var marker = L.marker([53.36951387, -6.34614944]).addTo(map);
        marker.bindPopup("Hole 1 Tee off");
        marker.on('click', onClick);

        //visuals only
        function onClick(e) {
            var popup = e.target.getPopup();
            var content = popup.getContent();

            console.log(content);
        }

        //visuals only
        var polyline = L.polyline([
                [53.36951387, -6.34614944],
                [53.36960605, -6.34257889],
                [53.36825406, -6.34121418],
                [53.36820605, -6.34129572],
            ],
            {
                color: 'red',
                weight: 2,
                opacity: 5,
                dashArray: '10,5',
                lineJoin: 'round'
            }
        ).addTo(map);

        //visuals only
        var marker = L.marker([53.36813115, -6.34029579]).addTo(map);

        var polyline = L.polyline([
                [53.36813115, -6.34029579],
                [53.36920404, -6.33919716],
                [53.36995684, -6.34002113],
                [53.37007462, -6.33970356],
            ],
            {
                color: 'red',
                weight: 2,
                opacity: 5,
                dashArray: '10,5',
                lineJoin: 'round'
            }
        ).addTo(map);

        //visuals only
        var marker = L.marker([53.37060977, -6.33845043]).addTo(map);

        var polyline = L.polyline([
                [53.37060977, -6.33845043],
                [53.36986722, -6.33793545],
                [53.36928854, -6.33627033],
                [53.36921684, -6.33658791],
            ],
            {
                color: 'red',
                weight: 2,
                opacity: 5,
                dashArray: '10,5',
                lineJoin: 'round'
            }
        ).addTo(map);

        //visuals only
        function map(position) {
            console.log(position);
        }

        {#navigator.geolocation.getCurrentPosition(map);#}


    </script>
{% endblock %}
{% block content %}

{% endblock content %}
